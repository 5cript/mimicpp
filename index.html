<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mimic++: mimic++, a modern and (mostly) macro free mocking framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">mimic++<span id="projectnumber">&#160;v1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('index.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">mimic++, a modern and (mostly) macro free mocking framework </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2github_2workspace_2_r_e_a_d_m_e"></a> <a href="https://codecov.io/gh/DNKpp/mimicpp"><img src="https://codecov.io/gh/DNKpp/mimicpp/graph/badge.svg?token=T9EpgyuyUi" alt="codecov" style="pointer-events: none;" class="inline"/></a> <a href="https://coveralls.io/github/DNKpp/mimicpp"><img src="https://coveralls.io/repos/github/DNKpp/mimicpp/badge.svg" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://app.codacy.com/gh/DNKpp/mimicpp/dashboard?utm_source=gh&amp;utm_medium=referral&amp;utm_content=&amp;utm_campaign=Badge_grade"><img src="https://app.codacy.com/project/badge/Grade/b852271c6e8742fe8a1667e679dc422b" alt="Codacy Badge" class="inline"/></a> <a href="https://app.codacy.com/gh/DNKpp/mimicpp/dashboard?utm_source=gh&amp;utm_medium=referral&amp;utm_content=&amp;utm_campaign=Badge_coverage"><img src="https://app.codacy.com/project/badge/Coverage/b852271c6e8742fe8a1667e679dc422b" alt="Codacy Badge" class="inline"/></a> <a href="https://dnkpp.github.io/mimicpp/"><img src="https://img.shields.io/badge/docs-doxygen-blue" alt="Documentation" class="inline"/></a></p>
<hr  />
<h1><a class="anchor" id="autotoc_md7"></a>
Author</h1>
<p>Dominic Koepke <br  />
 Mail: <a href="#" onclick="location.href='mai'+'lto:'+'dnk'+'pp'+'201'+'1@'+'gma'+'il'+'.co'+'m'; return false;">DNKpp2011@gmail.com</a></p>
<h1><a class="anchor" id="autotoc_md8"></a>
License</h1>
<p><a href="LICENSE_1_0.txt">BSL-1.0</a> (free, open source)</p>
<div class="fragment"><div class="line">         Copyright Dominic &quot;DNKpp&quot; Koepke 2024 - 2024</div>
<div class="line">Distributed under the Boost Software License, Version 1.0.</div>
<div class="line">   (See accompanying file LICENSE_1_0.txt or copy at</div>
<div class="line">         https://www.boost.org/LICENSE_1_0.txt)</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md10"></a>
Introduction</h1>
<p><code>mimic++</code> is a c++20 mocking framework, which aims to offer a very natural end expressive syntax, without constantly resorting to macros. To be honest, macros cannot be completely avoided, but they can at least be reduced to a very minimum.</p>
<p>The one thing, that this framework does different than all other (or at least all I am aware of) mocking framework is, that mock objects explicitly are function objects, thus directly callable. It's simple and straight forward.</p>
<p>As I'm mainly working on template or functional-style code, I wanted something simpler than always creating explicit mock types for the simplest of use cases. So, <code><a class="el" href="d2/d48/classmimicpp_1_1_mock.html" title="A Mock type, which fully supports overload sets.">mimicpp::Mock</a></code> objects can directly be used as functional objects, but they can also be used as member objects and thus serve as actual member functions. If you are curious, have a look at the documentation or directly into the examples.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Design Philosophy</h2>
<p>The framework is designed with two core concepts in mind: Mocks and Expectations. Mocks can be used to define behaviour on a per test-case basis, without the necessity of creating dozens of types. The go-to example is, if you have a custom type, which somehow makes a connection to a concrete database, you do not want to setup an actual database connection during your test runs. You then simply install a database mock, which then yields the exact replies as it were defined for that particular case: the so called "Expectations".</p>
<p>So, Mocks and Expectations are playing together hand in hand.</p>
<p>Additionally, users are able to create their own expectations easily and integrate them seamless into the rest of the framework. Be creative!</p>
<h2><a class="anchor" id="autotoc_md12"></a>
Basic Examples</h2>
<p>Mocks themselves are very easy to create: </p><div class="fragment"><div class="line"><a class="code hl_class" href="d2/d48/classmimicpp_1_1_mock.html">mimicpp::Mock</a>&lt;void()&gt; myMock{};</div>
<div class="ttc" id="aclassmimicpp_1_1_mock_html"><div class="ttname"><a href="d2/d48/classmimicpp_1_1_mock.html">mimicpp::Mock</a></div><div class="ttdoc">A Mock type, which fully supports overload sets.</div><div class="ttdef"><b>Definition</b> Mock.hpp:551</div></div>
</div><!-- fragment --><p> This already is a fully functional Mock, which enables a member <code>void operator()</code> for which Expectations can be created.</p>
<div class="fragment"><div class="line"><a class="code hl_class" href="d6/dc0/classmimicpp_1_1_scoped_expectation.html">mimicpp::ScopedExpectation</a> myExpectation = myMock.expect_call();</div>
<div class="ttc" id="aclassmimicpp_1_1_scoped_expectation_html"><div class="ttname"><a href="d6/dc0/classmimicpp_1_1_scoped_expectation.html">mimicpp::ScopedExpectation</a></div><div class="ttdef"><b>Definition</b> Expectation.hpp:335</div></div>
</div><!-- fragment --><p> The <code>expect_call()</code> member function initiates an expectation. Expectations are usually required to be fulfilled within the current (or deeper) scope. The <code>ScopedExpectation</code> then takes over the responsibility to check the Expectation, when that scope is left. Usually users do not need direct access to the expectations but still an unique name is required. To overcome that language limitation, an optional macro can be used: </p><div class="fragment"><div class="line"><a class="code hl_define" href="d2/d4f/_expectation_builder_8hpp.html#a7e7d68eefb8f3cba28422f62bcf2f90a">SCOPED_EXP</a> myMock.expect_call();</div>
<div class="ttc" id="a_expectation_builder_8hpp_html_a7e7d68eefb8f3cba28422f62bcf2f90a"><div class="ttname"><a href="d2/d4f/_expectation_builder_8hpp.html#a7e7d68eefb8f3cba28422f62bcf2f90a">SCOPED_EXP</a></div><div class="ttdeci">#define SCOPED_EXP</div><div class="ttdef"><b>Definition</b> ExpectationBuilder.hpp:235</div></div>
</div><!-- fragment --><p> This effectively does the same job as before, but the macro takes over the burden creating an unique name for that expectation.</p>
<p>Given the previously created expectation, it is expected, that the call operator of <code>myMock</code> is called exactly once: </p><div class="fragment"><div class="line">myMock();</div>
</div><!-- fragment --><p>Expectations can contain several requirements, e.g. <code>times</code> which indicates, how often an Expectation must be met. For more examples, have a look into the documentation or directly into the <code>examples</code> directory.</p>
<h2><a class="anchor" id="autotoc_md13"></a>
Special Acknowledgement</h2>
<p>This framework is highly inspired by the well known <a href="https://github.com/rollbear/trompeloeil">trompeloeil</a>, which I have used myself for several years now. It's definitly not bad, but sometimes feels a little bit dated and some macros do not play very well with formatting tools and the like. If you need a pre-c++20 mocking-framework, you should definitly give it a try.</p>
<p>Fun fact: <code>mimic++</code> uses <code>trompeloeil</code> for it's own test suite :D</p>
<h1><a class="anchor" id="autotoc_md14"></a>
Documentation</h1>
<p>The documenation is generated via <code>doxygen</code>. Users can do this locally by enabling both, the <code>MIMICPP_CONFIGURE_DOXYGEN</code> and <code>MIMICPP_CONFIGURE_DOXYGEN</code>, cmake options and building the target <code>mimicpp-generate-docs</code> manually.</p>
<p>The documentation for the <code>main</code> branch is always available on the github pages; for the <code>development</code> branch it is also available on the <code>dev-gh-pages</code> branch, but unfortunatly not directly viewable on the browser. Every release has the generated documentation attached.</p>
<h1><a class="anchor" id="autotoc_md15"></a>
Installation</h1>
<p>This framework is header-only and completely powered by cmake, thus the integration into a cmake project is straight-forward. </p><div class="fragment"><div class="line">target_link_libraries(</div>
<div class="line">    &lt;your_target_name&gt;</div>
<div class="line">    PUBLIC</div>
<div class="line">    mimicpp::mimicpp</div>
<div class="line">)</div>
</div><!-- fragment --><p>Users can either pick a commit in the <code>main</code> branch or a version tag and utilize the cmake <code>FetchContent</code> module: </p><div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(</div>
<div class="line">    mimicpp</div>
<div class="line">    GIT_REPOSITORY https://github.com/DNKpp/mimicpp</div>
<div class="line">    GIT_TAG        &lt;any_commit_hash_or_tag&gt;</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(mimicpp)</div>
<div class="line"># do not forget linking via target_link_libraries as shown above</div>
</div><!-- fragment --><p>As an alternative, I recommend the usage of <a href="https://github.com/cpm-cmake/CPM.cmake">CPM</a>, which is a featureful wrapper around the <code>FetchContent</code> functionality: </p><div class="fragment"><div class="line">include(CPM.cmake) # or include(get_cpm.cmake)</div>
<div class="line"> </div>
<div class="line">CPMAddPackage(&quot;gh:DNKpp/mimicpp#&lt;any_commit_hash_or_tag&gt;&quot;)</div>
<div class="line"># do not forget linking via target_link_libraries as shown above</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md16"></a>
Testing</h1>
<p><code>mimic++</code> utilizes a strict testing policy, thus each official feature is well tested. The effect of those test-cases are always tracked by the extensive ci, which checks the compilation success, test cases outcomes and coverage on dozens of different os, compiler and build configurations.</p>
<p>The coverage is generated via <code>gcov</code> and evaluated by <a href="https://app.codacy.com/gh/DNKpp/mimicpp/dashboard">codacy</a>, <a href="https://app.codecov.io/gh/DNKpp/mimicpp">codecov</a> and <a href="https://coveralls.io/github/DNKpp/mimicpp">coveralls</a>.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Windows</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">OS   </th><th class="markdownTableHeadNone">Compiler   </th><th class="markdownTableHeadCenter">c++-20   </th><th class="markdownTableHeadCenter">c++-23    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Windows 2022   </td><td class="markdownTableBodyNone">msvc   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Windows 2022   </td><td class="markdownTableBodyNone">clangCl   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md18"></a>
Linux</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Compiler   </th><th class="markdownTableHeadCenter">libstdc++   </th><th class="markdownTableHeadCenter">libc++   </th><th class="markdownTableHeadCenter">c++-20   </th><th class="markdownTableHeadCenter">c++-23    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">clang-17   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">clang-18   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gcc-13   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">gcc-14   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md19"></a>
MacOs</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Compiler   </th><th class="markdownTableHeadCenter">libstdc++   </th><th class="markdownTableHeadCenter">libc++   </th><th class="markdownTableHeadCenter">c++-20   </th><th class="markdownTableHeadCenter">c++-23    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">AppleClang-17.0.6   </td><td class="markdownTableBodyCenter">-   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td><td class="markdownTableBodyCenter">x   </td></tr>
</table>
<p>As new compilers become available, they will be added to the workflow, but older compilers will probably never be supported. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Jun 17 2024 for mimic++ by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
